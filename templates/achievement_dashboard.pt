<div metal:use-macro="layout">
    <style type="text/css" media="screen" metal:fill-slot="css">
        .showcase
        {
            border: 0px solid #AAA;
            text-align:center;
            padding: 0px 0 10px;
            margin-bottom: 40px;
        }
        
        .showcase_icon
        {
            display: inline-block;
            width: 150px;
            height: 150px;
            border: 0px solid #CCC;
            margin: 0 20px;
        }
        
        .unselected_icon
        {
            background-color: #FFF;
            color: #AAA;
            font-size: 22px;
            line-height: 32px;
        }
        
        .recents
        {
            float: right;
            width: 175px;
            border: 0px solid #AAA;
            text-align:center;
        }
        
        .recent_wrapper
        {
            display: inline-block;
            border: 0px solid #AAA;
            margin: 15px 5px;
            text-align: center;
        }
        
        .recent_wrapper strong
        {
            font-size: 1.1em;
        }
        
        .recent_icon
        {
            width: 75px;
            height: 75px;
            border: 0px solid #CCC;
            margin-bottom: 5px;
            margin: 0 auto;
        }
        
        .sections
        {
            border: 0px solid #AAA;
            margin-right: 150px;
        }
        
        .edit_showcase_icon
        {
            width: 25px;
            height: 25px;
            
            margin: -10px -15px -15px -10px;
            
            float:left;
        }
        
        .popup_section
        {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .popup_section_list
        {
            display:none;
        }
        
        .popup_subsection
        {
            
        }
        
        .popup_subsection_list
        {
            display:none;
        }
        
        
        .popup_achievement
        {
            border-bottom: 1px solid #AAA;
            padding: 15px 10px;
            margin: 0 -5px;
        }
        
        .popup_achievement img
        {
            float: left;
            margin-top: -10px;
            margin-left: -10px;
            margin-right: 10px;
        }
    </style>
    
    <div metal:fill-slot="header_buttons" style="display:inline-block;">
        <a href="${request.route_url('achievements_dashboard')}" tal:condition="user_id != request.user.id" class="inbutton">Achievements dashboard</a>
    </div>
    
    <div metal:fill-slot="content">
        <div class="error">
            This is still a work in progress. As with Wordy I am writing this my free time. If you have any suggestions then please let me know.
        </div>
        
        <!-- Showcase for drag and drop -->
        <div class="showcase">
            <h3>Showcase</h3>
            
            <div class="showcase_icon" tal:repeat="s showcase">
                <img src="${request.static_url('dashboard:static/images/achievements/{}_full.png'.format(achievement_types[s].lookup))}" width="150" height="150"/>
            </div>
            
            <div class="showcase_icon unselected_icon" tal:repeat="i range(len(showcase), 5)">
                <div class="edit_showcase_icon" tal:condition="user_id == request.user.id">
                    <div onclick="$('#showcase_editor').html('Loading...').load('${request.route_url('achievements_showcase_popup')}').dialog({title:'Select trophy',position:[($(window).width() / 2) - (600 / 2), 150],modal:true,minWidth:600,buttons:{Cancel: function() {$(this).dialog('close');}}});" class="ui-state-default ui-corner-all icon_button" title="Edit trophy">
                        <span class="ui-icon ui-icon-wrench"></span>
                    </div>
                </div>
                
                <br />
                No trophy displayed
            </div>
        </div>
        
        <div id="showcase_editor" style="display:none;">
            &nbsp;
        </div>
        
        <a href="${request.route_url('achievements_search')}" class="inbutton">Search achievements</a>
        
        
        <!-- Recents achievements -->
        <div class="recents">
            <h3>Recent achievements</h3>
            <div class="recent_wrapper" tal:repeat="a recents">
                <div class="recent_icon">
                    <img src="${request.static_url('dashboard:static/images/achievements/{}_thumb.png'.format(achievement_types[a.item].lookup))}" width="75" height="75"/>
                </div>
                <strong>${achievement_types[a.item].name} (${achievement_types[a.item].points})</strong><br />
                ${a.first_awarded.strftime("%d/%m/%Y")}
            </div>
        </div>
        
        <!-- Main content block -->
        <div class="sections">
            <h3>Sections<h3>
            <a tal:repeat="s sections" class="button" href="${request.route_url('achievements_category', user_id=user_id, category=s)}" style="width: 400px; height 40px;">
                ${sections[s]['name']}
            </a>
        </div>
        
        <div style="clear:both;">
            &nbsp;
        </div>
    </div>
</div>